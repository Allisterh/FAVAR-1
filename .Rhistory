head(regdata[,116:118])
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2)
# Boivin
fit_bgm <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], fctmethod = 'BGM',
nrep = 5000, nburn = 1000, K = 2, plag = 2)
View(fit_bgm)
cbind(fit$factorx, fit_bgm$factorx) %>% head()
library(magrittr)
cbind(fit$factorx, fit_bgm$factorx) %>% head()
cbind(fit$factorx, fit_bgm$factorx) %>% summary()
library(stargazer)
cbind(fit$factorx, fit_bgm$factorx) %>% stargazer(type = 'text')
cbind(fit$factorx, fit_bgm$factorx) %>% stargazer(type = 'text',summary = T)
fct_cmp <- cbind(fit$factorx, fit_bgm$factorx)
fct_cmp <- cbind(fit$factorx, fit_bgm$factorx)
names(fct_cmp) <- c('bee_fct1','bee_fct2','bgm_fct1','bgm_fct2')
stargazer(fct_cmp,type = 'text',summary = T)
colnames(fct_cmp) <- c('bee_fct1','bee_fct2','bgm_fct1','bgm_fct2')
stargazer(fct_cmp,type = 'text',summary = T)
stargazer(fct_cmp[,c('bee_fct1','bgm_fct1','bee_fct2','bgm_fct2')],type = 'text',summary = T)
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
library(patchwork)
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
ggsave('data-raw/irf_bgm_rj.pdf')
library(ggplot2)
ggsave('data-raw/irf_bgm_rj.pdf')
ggsave('data-raw/irf_bgm_rj.pdf')
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
BVAR
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
detach(package:FAVAR)
library(devtools)
load_all()
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(nu0 = 0, s0 = 0, mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1), nu0 = 0, s0 = 0),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
?warning
ans <- irf(fit_mn, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
ggsave('data-raw/irf_mn_rj.pdf')
# Generalized IRF
ans <- irf(fit,irftype = 'gen', resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
ggsave('data-raw/irf_gen_rj.pdf')
check()
check()
?coef
x <- 1:5; coef(lm(c(1:3, 7, 6) ~ x))
ans <- coef(lm(c(1:3, 7, 6) ~ x))
?coef
vars::Acoef
vars::coef
getAnywhere(vars::coef)
?coef
object <- fit
View(object)
dim(object$Lamb)[1]
ans <- lapply(1:dim(object$Lamb)[1], function(i,x) x[i,,], x = object$Lamb)
View(ans)
ans <- lapply(1:dim(object$Lamb)[2], function(i,x) colMeans(x[,i,]), x = object$Lamb)
dim(object$Lamb)[2]
a <- object$Lamb[,2,]
View(a)
ans <- sapply(1:dim(object$Lamb)[2], function(i,x) colMeans(x[,i,]), x = object$Lamb)
View(ans)
View(fit)
fit$Lamb[1,,]
fit$Lamb[2,,]
colnames(object$model_info$X)
colnames(ans) <- colnames(object$model_info$X)
ans <- sapply(1:dim(object$Lamb)[2], function(i,x) colMeans(x[,i,]), x = object$Lamb)
colnames(ans) <- colnames(object$model_info$X)
colnames(object$model_info$X)
rownames(ans) <- colnames(object$model_info$X)
fit[["varrlt"]][["sumrlt"]][["varcoef"]]
colnames(ans) <- object[["varrlt"]][["sumrlt"]][["varcoef"]]
object[["varrlt"]][["sumrlt"]][["varcoef"]]
colnames(ans) <- rownames(object[["varrlt"]][["sumrlt"]][["varcoef"]])
ans
fit[["varrlt"]][["sumrlt"]][["varcoef"]]
document()
load_all()
coef(fit)
coef.favar(fit)
document()
coef(fit)
check()
coef(fit)
class(fit)
load_all()
class(fit)
coef(fit)
coef.favar(fit)
document()
coef(fit)
check()
coef(fit)
library(glm)
library(BAYSTAR)
?coef
RSiteSearch('coef')
library(tsDyn)
?coef
?coef.nlar
coef(fit)
library(sloop)
install.packages('sloop')
library(sloop)
s3_dispatch(coef(fit))
coef(fit)
a <- coef(fit)
detach(package:FAVAR)
load_all()
coef(fit)
coef.favar(fit)
s3_dispatch(coef(fit))
s3_methods_class('coef')
s3_methods_generic('coef')
a <- s3_methods_generic('coef')
View(a)
arma::coef.coef
ARMAacf
document()
detach(package:stats)
coef
coef.favar
coef(fit)
rm(list = ls())
library(FAVAR)
data("regdata")
# X
head(regdata[,c(2,9,10)])
# Y
head(regdata[,116:118])
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2)
detach(package:FAVAR)
library(devtools)
load_all()
coef(fit)
library(sloop)
s3_dispatch(coef(fit))
install.packages('nls')
TSA::eacf()
?TSA::eacf
?predict
predict.TAR
library(TSA)
predict.TAR
getAnywhere(predict.TAR)
check()
class(fit)
coef(fit)
detach(package:FAVAR)
remove.packages('FAVAR')
install_github('common2016/FAVAR')
rm(list = ls())
library(FAVAR)
data("regdata")
# X
head(regdata[,c(2,9,10)])
# Y
head(regdata[,116:118])
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2)
coef(fit)
?coef
?FAVAR::coef
?FAVAR::coef.favar
library(FAVAR)
?coef
document()
coef(fit)
?coef
load_all()
?coef
detach(package:FAVAR)
remove.packages('FAVAR')
install_github('common2016/FAVAR')
install_github('common2016/FAVAR')
rm(list = ls())
library(pacman)
p_load(matlab,R.matlab,tidyverse, bvartools,foreach, devtools, patchwork)
# 该命令也会导入外部数据
devtools::load_all()
# 可以呈现数据
data('regdata')
# fit <- FAVAR(Y, X, slowcode = NULL,fctmethod = 'BGM',varprior = 'none',
#              nrep = 15000, nburn = 5000, K = 2, plag = 2, nhor = 22, ncores = 10)
# bernake (2005)的慢动速动抽取方法
ans <- Sys.time()
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 5000, nburn = 1000, K = 2, plag = 2,  ncores = 1)
coef(fit)
?residuals
install_github('common2016/FAVAR')
library(devtools)
install_github('common2016/FAVAR')
rm(list = ls())
library(FAVAR)
data("regdata")
# X
head(regdata[,c(2,9,10)])
# Y
head(regdata[,116:118])
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2)
summary(fit, xvar = c(2,9))
coef(fit)
?FAVAR
ans <- dlstats::cran_stats('CHNCapitalStock')
sum(ans$downloads)
View(ans)
install.packages('rhub')
library(rhub)
?rhub::check
rhub::check()
library(devtools)
check()
check()
?use_package
?foreach
document()
library(rhub)
?check_on_linux
check_on_linux(show_status = FALSE)
check_win_devel()
version
?check_on_linux
platforms()
ans <- dlstats::cran_stats('CHNCapitalStock')
sum(ans$downloads)
check()
check(show_status = FALSE)
devtools::check()
check(show_status = FALSE)
?bvartool
?bvartools::bvar
a <- dlstats::cran_stats('bvartools')
View(a)
sum(a$downloads)
?FAVAR
library(plm)
load('E:\\13_PapersFromFriends\\ChenChen\\chenchen_fix.rdata')
ncc <- plm(ihs_roa ~ wxmatrixnature + wxmatrix + change + nature +
sizelnassets + sizelnemployee + age + ihs_nwcasset + foreigninv +
top1 + nature + city + industry, data = test,
index = 'incity', model = 'pooling')
library(sandwich)
library(lmtest)
coeftest(ncc, vcov. = vcovHC , method = 'white2 ')
coeftest(ncc, vcov. = vcovHC , method = 'white2')
coef(ncc)
ans <- coef(ncc)
View(ans)
coeftest(ncc, vcov. = vcovHC , method = 'white2')
coeftest(ncc, vcov. = vcovHC , method = 'arellano')
View(test)
View(ncc)
regdata <- ncc$model
library(stargazer)
stargazer(regdata, type = 'text', summary = T)
View(regdata)
ncc <- plm(ihs_roa ~ log(wxmatrixnature) + wxmatrix + change + nature +
sizelnassets + sizelnemployee + age + ihs_nwcasset + foreigninv +
top1 + nature + city + industry, data = test,
index = 'incity', model = 'pooling')
test$wxmatrixnature <- test$wxmatrixnature/1e8
test$wxmatrix <- test$wxmatrix/1e8
ncc <- plm(ihs_roa ~ wxmatrixnature + wxmatrix + change + nature +
sizelnassets + sizelnemployee + age + ihs_nwcasset + foreigninv +
top1 + nature + city + industry, data = test,
index = 'incity', model = 'pooling')
coeftest(ncc, vcov. = vcovHC , method = 'white2')
stargazer(regdata, type = 'text', summary = T)
regdata <- ncc$model
stargazer(regdata, type = 'text', summary = T)
source('E:/13_PapersFromFriends/ChenChen/chenchen.R', encoding = 'UTF-8', echo=TRUE)
devtools::check()
example(FAVAR)
check()
devtools::check()
devtools::check()
devtools::check()
devtools::check_win_devel()
remove.packages('')
remove.packages('FAVAR')
devtools::install_github('common2016/FAVAR')
library(devt)
library(devtools)
check()
check_win_devel()
library(devtools)
check()
?release_checks
release_checks()
release()
spell_check()
spell_check()
document()
spell_check()
document()
spell_check()
document()
spell_check()
document()
spell_check()
document()
spell_check()
document()
spell_check()
release()
check_win_devel()
use_build_ignore('NEWS.md')
check()
release()
check()
release()
spell_check()
document()
document()
library(devtools)
spell_check()
check()
release()
?bvarsv::bvar.sv.tvp
?FAVAR
library(devtools)
check()
?bvartools::bvar
document()
?FAVAR
?FAVAR
document()
?FAVAR
document()
?FAVAR
spell_check()
document()
spell_check()
check()
spell_check()
detach(package:FAVAR)
remove.packages('FAVAR')
install_github('common2016/FAVAR')
?FAVAR::FAVAR
?bvartools::bvar
library(devtools)
document()
check()
library(devtools)
release()
library(devtools)
check()
version
session_info()
ans <- session_info()
session_info()[[1]]
ans <- session_info()[[1]]
session_info()[[1]][['os']]
grep('Big',session_info()[[1]][['os']])
rhub::platforms()
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
length(grep('Big',devtools::session_info()[[1]][['os']]))
length(grep('Big',devtools::session_info()[[1]][['os']])) != 1
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
?use_package
use_package('devtools', type = 'Suggests')
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
check_win_devel()
library(devtools)
check()
?release_checks
release_checks()
release()
library(MCMCpack)
?MCMCregress
# parallel
# cl <- parallel::makeCluster(ncores)
# parallel::clusterEvalQ(cl,{
#   library(MCMCpack)
#   library(matlab)
# }) %>% invisible()
# ans <- parallel::parLapply(cl, 1:ncol(X), factor_reg, Xmatrix = X, FY = FY, K = K, nburn = nburn,
#                     nrep = nrep, b0 = factorprior$b0, B0 = Li_prvar,
#                     c0 = factorprior$c0, d0 = factorprior$d0)
# parallel::stopCluster(cl)
ans <- vector('list',length(X))
library(devtools)
check()
load_all()
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 100, nburn = 10, K = 2, plag = 2,  ncores = 1)
check()
load_all()
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 100, nburn = 10, K = 2, plag = 2,  ncores = 1)
sum((colMeans(fit$Lamb[,,5]) - c(-0.5431962, 0.7660636,0.1760928,  0.2045756, -0.3872807))^2)
library(rhub)
platforms()
check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
load_all()
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 100, nburn = 10, K = 2, plag = 2,  ncores = 1)
load_all()
load_all()
document()
?FAVAR
data('regdata')
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 100, nburn = 10, K = 2, plag = 2,  ncores = 1)
colMeans(fit$Lamb[,,5])
load_all()
data('regdata')
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 100, nburn = 10, K = 2, plag = 2,  ncores = 1)
colMeans(fit$Lamb[,,5])
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
sum((c(0.5316754  0.7813119  0.1766548  0.2053781 -0.3866289)-c(-0.5431962, 0.7660636,0.1760928,  0.2045756, -0.3872807))^2)
sum((c(0.5316754,  0.7813119,  0.1766548,  0.2053781, -0.3866289)-c(-0.5431962, 0.7660636,0.1760928,  0.2045756, -0.3872807))^2)
(c(0.5316754,  0.7813119,  0.1766548,  0.2053781, -0.3866289)-c(-0.5431962, 0.7660636,0.1760928,  0.2045756, -0.3872807))^2
colMeans(fit$Lamb[,,6])
sum((colMeans(fit$Lamb[,,6]) - c(-0.8172659,  0.6471958,  0.2963342,  0.1737213, -0.2347369))^2)
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
fit$Lamb[,,6]
View(fit)
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
sum((c(0.5764231,  0.7444980,  0.1988504,  0.2099567, -0.4194197) - c(-0.8172659,  0.6471958,  0.2963342,  0.1737213, -0.2347369))^2)
(c(0.5764231,  0.7444980,  0.1988504,  0.2099567, -0.4194197) - c(-0.8172659,  0.6471958,  0.2963342,  0.1737213, -0.2347369))^2
sum((c(0.5764231,  0.7444980,  0.1988504,  0.2099567, -0.4194197) - c(-0.8172659,  0.6471958,  0.2963342,  0.1737213, -0.2347369))^2[2:5])
ans <- (c(0.5764231,  0.7444980,  0.1988504,  0.2099567, -0.4194197) - c(-0.8172659,  0.6471958,  0.2963342,  0.1737213, -0.2347369))^2
sum(ans[2:5])
load_all()
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 100, nburn = 10, K = 2, plag = 2,  ncores = 1)
sum((colMeans(fit$Lamb[,,6]) - c(-0.8172659,  0.6471958,  0.2963342,  0.1737213, -0.2347369))^2)
ans <- (c(0.5764231,  0.7444980,  0.1988504,  0.2099567, -0.4194197) - c(-0.8172659,  0.6471958,  0.2963342,  0.1737213, -0.2347369))^3
ans
colMeans(fit$Lamb[,,6])
colMeans(fit$Lamb[,,2])
sum((colMeans(fit$Lamb[,,2]) - c(-2.59768580,  0.50485415,  0.39458430,  0.01058636, -0.07097121))^2)
document()
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
ans <- (c(0.8399944,  0.6171118,  0.3124351,  0.1807789, -0.2690716) - c(-2.59768580,  0.50485415,  0.39458430,  0.01058636, -0.07097121))^2
ans
colMeans(fit$Lamb[,,2])
colMeans(fit$Lamb[,,2])[2:5]
abs((colMeans(fit$Lamb[,,2]))
abs(colMeans(fit$Lamb[,,2]))
?abs
colMeans(fit$Lamb[,,2])
abs(colMeans(fit$Lamb[,,2]))
abs(c(0.50485415,  0.39458430,  0.01058636, -0.07097121))
abs(colMeans(fit$Lamb[,,6]))
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
devtools::check()
platforms()
devtools::check()
rhub::check(platform = 'macos-m1-bigsur-release', show_status = FALSE)
devtools::check()
release()
