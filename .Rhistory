p_load(matlab,R.matlab,tidyverse, bvartools,foreach, devtools, patchwork)
# 该命令也会导入外部数据
devtools::load_all()
# 可以呈现数据
data('regdata')
# fit <- FAVAR(Y, X, slowcode = NULL,fctmethod = 'BGM',varprior = 'none',
#              nrep = 15000, nburn = 5000, K = 2, plag = 2, nhor = 22, ncores = 10)
# bernake (2005)的慢动速动抽取方法
ans <- Sys.time()
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, B0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
irftype = 'orth',
nrep = 5000, nburn = 1000, K = 2, plag = 2, nhor = 22, impvar = 5, ncores = 1)
Sys.time()-ans
summary(fit,xvar = c(3,5))
ans <- draw_irf(fit, irftype = 'orth', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
load_all()
ans <- draw_irf(fit, irftype = 'orth', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
document()
View(ans)
ans <- draw_irf(fit, irftype = 'orth', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
load_all()
ans <- draw_irf(fit, irftype = 'orth', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
View(picdata)
View(irf)
View(fit)
names(fit$model_info$X)
colnames(fit$model_info$X)
c(colnames(fit$model_info$X),colnames(fit$model_info$Y))
# draw
ttl <- c(colnames(fit$model_info$X),colnames(fit$model_info$Y))
p[[as.character(i)]] <- ggplot2::ggplot(picdata, ggplot2::aes(x = .data$nhor, y = .data$irf)) +
ggplot2::geom_line() + ggplot2::geom_line(ggplot2::aes(y = .data$up), linetype = 2) +
ggplot2::geom_hline(yintercept = 0) +
ggplot2::geom_line(ggplot2::aes(y = .data$dw), linetype = 2) +
ggplot2::labs(x = '', y= '', title = ttl[i]) +
ggplot2::theme_bw()
p[[1]]
load_all()
ans <- draw_irf(fit, irftype = 'orth', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
document()
document()
ci = 0.8
ci + (1-ci)/2
(1-ci)/2
library(bvarsv)
?bvarsv
library(devtools)
document()
document()
?FAVAR
check()
check()
?patchwork
??patchwork
?use_package
use_package('patchwork')
check()
check()
?ggplot
?bvarsv
use_testthat()
rm(list = ls())
library(pacman)
p_load(matlab,R.matlab,tidyverse, bvartools,foreach, devtools, patchwork)
# 该命令也会导入外部数据
devtools::load_all()
# 可以呈现数据
data('regdata')
# fit <- FAVAR(Y, X, slowcode = NULL,fctmethod = 'BGM',varprior = 'none',
#              nrep = 15000, nburn = 5000, K = 2, plag = 2, nhor = 22, ncores = 10)
# bernake (2005)的慢动速动抽取方法
ans <- Sys.time()
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, B0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
irftype = 'orth',
nrep = 5000, nburn = 1000, K = 2, plag = 2, nhor = 22, impvar = 5, ncores = 1)
Sys.time()-ans
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, B0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 5000, nburn = 1000, K = 2, plag = 2,  ncores = 1)
fit$Lamb
ans <- fit$Lamb
ans[,,1]
a <- ans[,,1]
View(a)
a <- ans[,,5]
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, B0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 0, nu0 = 0, s0 = 0),
nrep = 500, nburn = 100, K = 2, plag = 2,  ncores = 1)
fit$Lamb[,,5]
rowMeans(fit$Lamb[,,5])
colmeans(fit$Lamb[,,5])
colMeans(fit$Lamb[,,5])
colMeans(fit$Lamb[,,5]) - c(-0.5431962, 0.7660636,0.1760928,  0.2045756, -0.3872807)
(colMeans(fit$Lamb[,,5]) - c(-0.5431962, 0.7660636,0.1760928,  0.2045756, -0.3872807))^2
sum((colMeans(fit$Lamb[,,5]) - c(-0.5431962, 0.7660636,0.1760928,  0.2045756, -0.3872807))^2)
test()
load_all()
?ggplot
load_all()
ans <- irf(fit, irftype = 'orth', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
load_all()
ans <- irf(fit, irftype = 'orth', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
ans <- irf(fit, irftype = 'gen', tcode = tcode,
resvar = c(2, 9, 10, 28, 42, 46, 77, 91, 92, 108, 109, 111, 116,117,118),
impvar = NULL, nhor = 21)
fit$varrlt$A
varcoef <- fit$varrlt$A
rowMeans(fit$varrlt$A)
sum(rowMeans(fit$varrlt$A) - c(0.778129386, -0.603017504,  0.213206464,  0.325159327, -0.100403434,
0.149940841,  0.853207800,  0.286029475, -0.321815773,  0.681410053,
0.031195983,  0.009408599,  1.028526266, -0.031933855,  0.240291022,
-0.212201285,  0.437870305, -0.024441733, 0.749676918,  0.130926541,
0.055975167, -0.078032560, -0.060970421, -0.013329282,  0.791751571,
0.186799661,  0.046754597,  0.251181251,  0.150234164,  0.061598555
-0.048730709,  0.001875996,  0.061739936, 0.138572123, -0.370153282,
-0.046645148,  0.121886463, -0.184829209,  0.024781678, -0.208729971,
0.159108630, -0.416506794,  0.024704619,  0.198934484, -0.150351969,
-0.008916529,  0.014557877,  0.046474131,  0.025599617,  0.159949583))^2
rowMeans(fit$varrlt$A)
c(0.778129386, -0.603017504,  0.213206464,  0.325159327, -0.100403434,
0.149940841,  0.853207800,  0.286029475, -0.321815773,  0.681410053,
0.031195983,  0.009408599,  1.028526266, -0.031933855,  0.240291022,
-0.212201285,  0.437870305, -0.024441733, 0.749676918,  0.130926541,
0.055975167, -0.078032560, -0.060970421, -0.013329282,  0.791751571,
0.186799661,  0.046754597,  0.251181251,  0.150234164,  0.061598555
-0.048730709,  0.001875996,  0.061739936, 0.138572123, -0.370153282,
-0.046645148,  0.121886463, -0.184829209,  0.024781678, -0.208729971,
0.159108630, -0.416506794,  0.024704619,  0.198934484, -0.150351969,
-0.008916529,  0.014557877,  0.046474131,  0.025599617,  0.159949583)
sum(rowMeans(fit$varrlt$A) - c(0.778129386, -0.603017504,  0.213206464,  0.325159327, -0.100403434,
0.149940841,  0.853207800,  0.286029475, -0.321815773,  0.681410053,
0.031195983,  0.009408599,  1.028526266, -0.031933855,  0.240291022,
-0.212201285,  0.437870305, -0.024441733, 0.749676918,  0.130926541,
0.055975167, -0.078032560, -0.060970421, -0.013329282,  0.791751571,
0.186799661,  0.046754597,  0.251181251,  0.150234164,  0.061598555,
-0.048730709,  0.001875996,  0.061739936, 0.138572123, -0.370153282,
-0.046645148,  0.121886463, -0.184829209,  0.024781678, -0.208729971,
0.159108630, -0.416506794,  0.024704619,  0.198934484, -0.150351969,
-0.008916529,  0.014557877,  0.046474131,  0.025599617,  0.159949583))^2
test()
test()
floor(0.001)
?testthat_tolerance
?expect_true
test()
test()
dtirf <- irf(fit,resvar = c(2,9,10))
dtirf <- irf(fit,resvar = 2)
View(dtirf)
?map2_df
?`[`
`[`(tcod,1)
`[`(tcode,1)
`[`(tcode,1:3)
`[`(regdata,1)
sapply(dtirf$imp, function(x) x[3,])
irf_tol <- sapply(dtirf$imp, function(x) x[3,])
View(irf_tol)
irf_tol <- sapply(dtirf$imp, function(x) x[3,]) %>% rowMeans()
irf_tol <- sapply(dtirf$imp, function(x) x[2,]) %>% rowMeans()
dtirf <- irf(fit,resvar = 2, tcode = tcode)
sapply(dtirf$imp, function(x) x[2,]) %>% rowMeans()
rowMeans(sapply(dtirf$imp, function(x) x[2,])) -
c(-0.06851129, -0.13232879, -0.32971814, -0.51434825, -0.64979011, -0.74314192,
-0.80345666, -0.84062401, -0.86199900, -0.87239392)
(rowMeans(sapply(dtirf$imp, function(x) x[2,])) -
c(-0.06851129, -0.13232879, -0.32971814, -0.51434825, -0.64979011, -0.74314192,
-0.80345666, -0.84062401, -0.86199900, -0.87239392))^2
sum((rowMeans(sapply(dtirf$imp, function(x) x[2,])) -
c(-0.06851129, -0.13232879, -0.32971814, -0.51434825, -0.64979011, -0.74314192,
-0.80345666, -0.84062401, -0.86199900, -0.87239392))^2)
test()
check()
?irf
?summary.favar
?BGM
document()
?use_readme_rmd
use_readme_rmd()
ans <- irf(fit,resvar = c(2,9,10), tcode = tcode, nhor = 21, showplot = T)
check()
install_github('common2016/FAVAR')
detach(package:FAVAR)
install_github('common2016/FAVAR')
library(devtools)
?FAVAR
load_all()
?FAVAR
document()
check()
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?irf
check()
depatch(package:FAVAR)
detach(package:FAVAR)
remove.packages('FAVAR')
document()
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
document()
?FAVAR
library(bvartools)
example("minnesota_prior")
View(prior)
test()
?irf
library(urca)
?urca::ecb
example("ur.df")
View(lc.df)
?AIC
AIC(lc.df)
AIC(lc.df$testreg)
AIC(lc.df@testreg)
show(lc.df)
library(devtools)
document()
?FAVAR
document()
?FAVAR
?irf
document()
?irf
document()
?irf
document()
?irf
document()
?irf
install_github('common2016/FAVAR')
detach(package:FAVAR)
install_github('common2016/FAVAR')
library(FAVAR)
?FAVAR
data('regdata')
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,fctmethod = 'BBE',
factorprior = list(b0 = 0, vb0 = NULL, c0 = 0.01, d0 = 0.01),
varprior = list(b0 = 0,vb0 = 10, nu0 = 0, s0 = 0),
nrep = 500, nburn = 100, K = 2, plag = 2)
irf(fit,resvar = c(2,9,10))
ans <- irf(fit,resvar = c(2,9,10))
detach(package:FAVAR)
check()
check()
?FAVAR
?FAVAR::FAVAR
library(FAVAR)
data("regdata")
source('E:/27_MyRPackages/FAVAR/FAVAR/data-raw/for_rj.R', echo=TRUE)
View(regdata)
head(regdata[,116:118])
# X
head(regdata[,c(2,9,10)])
source('E:/27_MyRPackages/FAVAR/FAVAR/data-raw/draft.R', encoding = 'UTF-8', echo=TRUE)
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2,  ncores = 1)
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2,  ncores = 1)
detach(package:FAVAR)
load_all()
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2,  ncores = 1)
?irf
irf(fit, resvar = c(2,9,10))
ans <- irf(fit, resvar = c(2,9,10))
source('E:/27_MyRPackages/FAVAR/FAVAR/data-raw/for_rj.R', echo=TRUE)
summary(fit, xvar = c(2,9))
ans <- irf(fit, resvar = c(2,9,10),nhor = 20)
ggsave('data-raw/irf_rj.pdf')
ans <- irf(fit, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),nhor = 20)
ggsave('data-raw/irf_rj.pdf')
check()
ans <- irf(fit, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
ggsave('data-raw/irf_raw_rj.pdf')
library(CHNCapitalStock)
?CHNCapitalStock::CompK
?FAVAR
# Boivin
fit_bgm <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], fctmethod = 'BGM',
nrep = 5000, nburn = 1000, K = 2, plag = 2)
View(fit)
library(FAVAR)
data("regdata")
# X
head(regdata[,c(2,9,10)])
# Y
head(regdata[,116:118])
# estimate a FAVAR
fit <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
nrep = 5000, nburn = 1000, K = 2, plag = 2)
# Boivin
fit_bgm <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], fctmethod = 'BGM',
nrep = 5000, nburn = 1000, K = 2, plag = 2)
View(fit_bgm)
cbind(fit$factorx, fit_bgm$factorx) %>% head()
library(magrittr)
cbind(fit$factorx, fit_bgm$factorx) %>% head()
cbind(fit$factorx, fit_bgm$factorx) %>% summary()
library(stargazer)
cbind(fit$factorx, fit_bgm$factorx) %>% stargazer(type = 'text')
cbind(fit$factorx, fit_bgm$factorx) %>% stargazer(type = 'text',summary = T)
fct_cmp <- cbind(fit$factorx, fit_bgm$factorx)
fct_cmp <- cbind(fit$factorx, fit_bgm$factorx)
names(fct_cmp) <- c('bee_fct1','bee_fct2','bgm_fct1','bgm_fct2')
stargazer(fct_cmp,type = 'text',summary = T)
colnames(fct_cmp) <- c('bee_fct1','bee_fct2','bgm_fct1','bgm_fct2')
stargazer(fct_cmp,type = 'text',summary = T)
stargazer(fct_cmp[,c('bee_fct1','bgm_fct1','bee_fct2','bgm_fct2')],type = 'text',summary = T)
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
library(patchwork)
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
ggsave('data-raw/irf_bgm_rj.pdf')
library(ggplot2)
ggsave('data-raw/irf_bgm_rj.pdf')
ggsave('data-raw/irf_bgm_rj.pdf')
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
BVAR
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
detach(package:FAVAR)
library(devtools)
load_all()
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(nu0 = 0, s0 = 0, mn = list(kappa0 = 0.7, kappa1 = 1)),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
# Minnesota prior
fit_mn <- FAVAR(Y = regdata[,c("Inflation","Unemployment","Fed_funds")],
X = regdata[,1:115], slowcode = slowcode,
varprior = list(mn = list(kappa0 = 0.7, kappa1 = 1), nu0 = 0, s0 = 0),
nrep = 5000, nburn = 1000, K = 2, plag = 2)
ans <- irf(fit_bgm, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
?warning
ans <- irf(fit_mn, resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
ggsave('data-raw/irf_mn_rj.pdf')
# Generalized IRF
ans <- irf(fit,irftype = 'gen', resvar = c(2,9,10,28, 42, 46, 77, 91, 92, 108, 109, 111),tcode = tcode,nhor = 20)
ggsave('data-raw/irf_gen_rj.pdf')
check()
check()
?coef
x <- 1:5; coef(lm(c(1:3, 7, 6) ~ x))
ans <- coef(lm(c(1:3, 7, 6) ~ x))
?coef
vars::Acoef
vars::coef
getAnywhere(vars::coef)
?coef
object <- fit
View(object)
dim(object$Lamb)[1]
ans <- lapply(1:dim(object$Lamb)[1], function(i,x) x[i,,], x = object$Lamb)
View(ans)
ans <- lapply(1:dim(object$Lamb)[2], function(i,x) colMeans(x[,i,]), x = object$Lamb)
dim(object$Lamb)[2]
a <- object$Lamb[,2,]
View(a)
ans <- sapply(1:dim(object$Lamb)[2], function(i,x) colMeans(x[,i,]), x = object$Lamb)
View(ans)
View(fit)
fit$Lamb[1,,]
fit$Lamb[2,,]
colnames(object$model_info$X)
colnames(ans) <- colnames(object$model_info$X)
ans <- sapply(1:dim(object$Lamb)[2], function(i,x) colMeans(x[,i,]), x = object$Lamb)
colnames(ans) <- colnames(object$model_info$X)
colnames(object$model_info$X)
rownames(ans) <- colnames(object$model_info$X)
fit[["varrlt"]][["sumrlt"]][["varcoef"]]
colnames(ans) <- object[["varrlt"]][["sumrlt"]][["varcoef"]]
object[["varrlt"]][["sumrlt"]][["varcoef"]]
colnames(ans) <- rownames(object[["varrlt"]][["sumrlt"]][["varcoef"]])
ans
fit[["varrlt"]][["sumrlt"]][["varcoef"]]
document()
load_all()
coef(fit)
coef.favar(fit)
document()
coef(fit)
check()
coef(fit)
class(fit)
load_all()
class(fit)
coef(fit)
coef.favar(fit)
document()
coef(fit)
check()
coef(fit)
library(glm)
library(BAYSTAR)
?coef
RSiteSearch('coef')
library(tsDyn)
?coef
?coef.nlar
coef(fit)
library(sloop)
install.packages('sloop')
library(sloop)
s3_dispatch(coef(fit))
coef(fit)
a <- coef(fit)
detach(package:FAVAR)
load_all()
coef(fit)
coef.favar(fit)
s3_dispatch(coef(fit))
s3_methods_class('coef')
s3_methods_generic('coef')
a <- s3_methods_generic('coef')
View(a)
arma::coef.coef
ARMAacf
document()
detach(package:stats)
coef
coef.favar
coef(fit)
